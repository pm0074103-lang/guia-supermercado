<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>S√∫per Gu√≠a Pro - ESPOL</title>
    <style>
        :root { --blue: #1a73e8; --shelf: #d1d5db; --floor: #f8fafc; --path: #fbbf24; }
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; margin: 0; display: flex; justify-content: center; height: 100vh; }
        .app { width: 100vw; max-width: 450px; background: var(--floor); display: flex; flex-direction: column; box-shadow: 0 0 40px rgba(0,0,0,0.5); border-radius: 20px; overflow: hidden; margin: 10px; }
        header { background: white; padding: 20px; text-align: center; border-bottom: 2px solid #e2e8f0; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; background: white; }
        .btn { border: 2px solid #e2e8f0; background: #fff; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; flex-direction: column; align-items: center; transition: 0.2s; }
        .btn.active { border-color: var(--blue); background: #eff6ff; transform: translateY(-2px); }
        #map-box { flex: 1; margin: 15px; border-radius: 15px; background: #fff; overflow: hidden; border: 2px solid #e2e8f0; position: relative; }
        canvas { width: 100%; height: 100%; display: block; touch-action: none; }
        .pop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.9); display: none; justify-content: center; align-items: center; z-index: 100; }
        .pop-box { background: white; padding: 30px; border-radius: 24px; text-align: center; width: 80%; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="app">
        <header><h2 style="margin:0; color:var(--blue)">üõí SuperMap Pro</h2></header>
        <div class="grid">
            <button class="btn" onclick="sel('pan',this)"><span>üçû</span>Pan</button>
            <button class="btn" onclick="sel('leche',this)"><span>ü•õ</span>L√°cteos</button>
            <button class="btn" onclick="sel('fruta',this)"><span>üçé</span>Frutas</button>
            <button class="btn" onclick="sel('carne',this)"><span>ü•©</span>Carnes</button>
            <button class="btn" onclick="sel('aseo',this)"><span>üßΩ</span>Aseo</button>
            <button class="btn" onclick="sel('salud',this)"><span>üíä</span>Salud</button>
        </div>
        <div id="map-box"><canvas id="c"></canvas></div>
        <div style="padding:15px; text-align:center; font-size:14px; color:#64748b; background:white;">Toque el mapa para simular su movimiento</div>
    </div>
    <div id="pop" class="pop"><div class="pop-box"><h2>¬°LLEG√ì! üéØ</h2><p>El producto est√° en esta estanter√≠a.</p><button onclick="location.reload()" style="padding:12px; width:100%; background:var(--blue); color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">Entendido</button></div></div>
    <script>
        const cv = document.getElementById('c'); const ctx = cv.getContext('2d');
        let p = { x: 300, y: 550 }; let d = null;
        const pts = { pan:{x:120,y:120}, leche:{x:480,y:120}, fruta:{x:300,y:280}, carne:{x:120,y:420}, aseo:{x:480,y:420}, salud:{x:300,y:100} };
        function init() { cv.width = 600; cv.height = 600; draw(); }
        function draw() {
            ctx.clearRect(0,0,600,600);
            // Cuadr√≠cula de fondo
            ctx.strokeStyle = "#f1f5f9"; ctx.lineWidth = 1;
            for(let i=0; i<600; i+=30){ ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,600); ctx.stroke(); ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(600,i); ctx.stroke(); }
            // Estanter√≠as Detalladas
            [[80,180,100,280],[250,180,100,280],[420,180,100,280]].forEach(s => {
                ctx.fillStyle = "#cbd5e1"; ctx.fillRect(s[0]+5, s[1]+5, s[2], s[3]); // Sombra estante
                ctx.fillStyle = "#f8fafc"; ctx.fillRect(s[0], s[1], s[2], s[3]); // Tapa estante
                ctx.strokeStyle = "#94a3b8"; ctx.lineWidth = 2; ctx.strokeRect(s[0], s[1], s[2], s[3]);
                // L√≠neas internas del estante
                for(let j=s[1]+40; j<s[1]+s[3]; j+=40){ ctx.beginPath(); ctx.moveTo(s[0],j); ctx.lineTo(s[0]+s[2],j); ctx.stroke(); }
            });
            if (d) {
                ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(p.x,d.y+40); ctx.lineTo(d.x,d.y+40); ctx.lineTo(d.x,d.y);
                ctx.strokeStyle = "rgba(251, 191, 36, 0.5)"; ctx.lineWidth = 20; ctx.lineJoin="round"; ctx.stroke(); // Brillo ruta
                ctx.strokeStyle = "#fbbf24"; ctx.lineWidth = 10; ctx.stroke(); // L√≠nea central
                ctx.font = "45px Arial"; ctx.fillText("üìç",d.x-22,d.y+15);
            }
            // Usuario con efecto de pulso
            ctx.shadowBlur = 15; ctx.shadowColor = "rgba(26, 115, 232, 0.4)";
            ctx.beginPath(); ctx.arc(p.x,p.y,24,0,Math.PI*2); ctx.fillStyle = "#1a73e8"; ctx.fill();
            ctx.strokeStyle = "white"; ctx.lineWidth = 5; ctx.stroke(); ctx.shadowBlur = 0;
            ctx.fillStyle = "white"; ctx.font = "bold 16px sans-serif"; ctx.textAlign = "center"; ctx.fillText("T√ö",p.x,p.y+6);
        }
        function sel(id,b) { d=pts[id]; document.querySelectorAll('.btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); draw(); }
        function move(cx,cy) {
            const r = cv.getBoundingClientRect(); p.x = (cx-r.left)*(600/r.width); p.y = (cy-r.top)*(600/r.height);
            if (d && Math.sqrt((p.x-d.x)**2+(p.y-d.y)**2)<50) document.getElementById('pop').style.display="flex";
            draw();
        }
        cv.addEventListener('mousedown',e=>move(e.clientX,e.clientY));
        cv.addEventListener('touchstart',e=>{e.preventDefault(); move(e.touches[0].clientX,e.touches[0].clientY);},{passive:false});
        window.onload = init;
    </script>
</body>
</html>
