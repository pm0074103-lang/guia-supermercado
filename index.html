<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>S칰per Gu칤a M칩vil</title>
    <style>
        body { font-family: sans-serif; background: #ddd; margin: 0; display: flex; justify-content: center; }
        .app { width: 100vw; max-width: 450px; height: 100vh; background: white; display: flex; flex-direction: column; overflow: hidden; }
        header { background: #4285F4; color: white; padding: 15px; text-align: center; font-size: 20px; font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; padding: 10px; }
        .btn { border: 2px solid #ccc; background: #fff; padding: 10px; border-radius: 10px; font-weight: bold; cursor: pointer; display: flex; flex-direction: column; align-items: center; }
        .btn.active { border-color: #4285F4; background: #e8f0fe; }
        #map-box { flex: 1; margin: 10px; border: 3px solid #333; border-radius: 15px; background: #fff; overflow: hidden; }
        canvas { width: 100%; height: 100%; display: block; touch-action: none; }
        .pop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 100; }
        .pop-box { background: white; padding: 30px; border-radius: 20px; text-align: center; width: 70%; }
    </style>
</head>
<body>
    <div class="app">
        <header>游 Gu칤a S칰per F치cil</header>
        <div class="grid">
            <button class="btn" onclick="sel('pan',this)"><span>游</span>Pan</button>
            <button class="btn" onclick="sel('leche',this)"><span>游볱</span>Leche</button>
            <button class="btn" onclick="sel('fruta',this)"><span>游꼝</span>Fruta</button>
            <button class="btn" onclick="sel('carne',this)"><span>游볼</span>Carne</button>
            <button class="btn" onclick="sel('aseo',this)"><span>游빟</span>Aseo</button>
            <button class="btn" onclick="sel('salud',this)"><span>游눍</span>Salud</button>
        </div>
        <div id="map-box"><canvas id="c"></canvas></div>
        <div style="padding:10px; text-align:center; font-weight:bold; background:#fff9c4;">Toque el mapa para simular que camina</div>
    </div>
    <div id="pop" class="pop"><div class="pop-box"><h2 style="color:green">춰LLEG칍! 游꿢</h2><p>El producto est치 aqu칤.</p><button onclick="location.reload()" style="padding:10px; width:100%; background:#4285F4; color:white; border:none; border-radius:10px;">Aceptar</button></div></div>
    <script>
        const cv = document.getElementById('c'); const ctx = cv.getContext('2d');
        let p = { x: 300, y: 550 }; let d = null;
        const pts = { pan:{x:120,y:120}, leche:{x:480,y:120}, fruta:{x:300,y:280}, carne:{x:120,y:420}, aseo:{x:480,y:420}, salud:{x:300,y:100} };
        function init() { cv.width = 600; cv.height = 600; draw(); }
        function draw() {
            ctx.clearRect(0,0,600,600); ctx.fillStyle = "#eee";
            [[80,180,100,280],[250,180,100,280],[420,180,100,280]].forEach(s => ctx.fillRect(s[0],s[1],s[2],s[3]));
            if (d) {
                ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(p.x,d.y+40); ctx.lineTo(d.x,d.y+40); ctx.lineTo(d.x,d.y);
                ctx.strokeStyle = "#FBBC05"; ctx.lineWidth = 15; ctx.lineJoin = "round"; ctx.stroke();
                ctx.font = "40px Arial"; ctx.fillText("游늸",d.x-20,d.y+10);
            }
            ctx.beginPath(); ctx.arc(p.x,p.y,25,0,Math.PI*2); ctx.fillStyle = "#4285F4"; ctx.fill();
            ctx.strokeStyle = "white"; ctx.lineWidth = 5; ctx.stroke();
            ctx.fillStyle = "white"; ctx.font = "bold 18px Arial"; ctx.textAlign = "center"; ctx.fillText("T칔",p.x,p.y+7);
        }
        function sel(id,b) { d=pts[id]; document.querySelectorAll('.btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); draw(); }
        function move(cx,cy) {
            const r = cv.getBoundingClientRect(); p.x = (cx-r.left)*(600/r.width); p.y = (cy-r.top)*(600/r.height);
            if (d && Math.sqrt((p.x-d.x)**2+(p.y-d.y)**2)<50) document.getElementById('pop').style.display="flex";
            draw();
        }
        cv.addEventListener('mousedown',e=>move(e.clientX,e.clientY));
        cv.addEventListener('touchstart',e=>{e.preventDefault(); move(e.touches[0].clientX,e.touches[0].clientY);},{passive:false});
        window.onload = init;
    </script>
</body>
</html>
